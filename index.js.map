{"mappings":";;;;;AAAA;;;;;AAKA,MAAM,6BAAO;AAGb,MAAM,mCAAa,8BAAuB;IACzC,MAAW;IACX,MAAW;IACX,UAAW;IACX,UAAW;AACZ;AAEA,MAAM,4BAAM;AAEZ,0BAAI,GAAG,CAAC,sBAAQ;IACf,QAAQ;IACR,QAAQ,IAAI;IACZ,mBAAmB,IAAI;AACxB;AACA,0BAAI,GAAG,CAAC,eAAQ,IAAI;AACpB,0BAAI,GAAG,CAAC,eAAQ,UAAU,CAAC;IAAE,UAAU,IAAI;AAAC;AAC5C,0BAAI,GAAG,CAAC,eAAQ,MAAM,CAAC,iBAAU,iCAAW;AAE5C,0BAAI,GAAG,CAAC,eAAQ,MAAM,CAAC;AACvB,0BAAI,GAAG,CAAC,UAAU,CAAC,KAAK,MAAM;IAC1B,IAAI,MAAM,CAAC;IACX,IAAI,QAAQ,CAAC,iBAAU,iCAAW;AAEtC;AAEA,0BAAI,GAAG,CAAC,KAAK,CAAC,KAAK,MAAM;IACrB,IAAI,MAAM,CAAC;IACX,IAAI,QAAQ,CAAC,iBAAU,iCAAW;AAEtC;AAEA,0BAAI,IAAI,CAAC,SAAS,SAAS,OAAO,EAAE,QAAQ,EAAE;IAC7C,2BAA2B;IAC3B,IAAI,WAAW,QAAQ,IAAI,CAAC,QAAQ;IACpC,IAAI,WAAW,QAAQ,IAAI,CAAC,QAAQ;IACpC,mDAAmD;IACnD,IAAI,YAAY,UACf,8GAA8G;IAC9G,iCAAW,KAAK,CAAC,8DAA8D;QAAC;QAAU;KAAS,EAAE,SAAS,KAAK,EAAE,OAAO,EAAE,MAAM,EAAE;QACrI,wDAAwD;QACxD,IAAI,OAAO,MAAM,MAAM;QACvB,wBAAwB;QACxB,IAAI,QAAQ,MAAM,GAAG,GAAG;YACvB,wBAAwB;YACxB,QAAQ,OAAO,CAAC,QAAQ,GAAG,IAAI;YAC/B,QAAQ,OAAO,CAAC,QAAQ,GAAG;YAC3B,wBAAwB;YACxB,SAAS,QAAQ,CAAC;QACnB,OACC,SAAS,IAAI,CAAC;QAEf,SAAS,GAAG;IACb;SACM;QACN,SAAS,IAAI,CAAC;QACd,SAAS,GAAG;IACb,CAAC;AACF;AAEA,6BAA6B;AAC7B,0BAAI,GAAG,CAAC,SAAS,SAAS,OAAO,EAAE,QAAQ,EAAE;IAC5C,0BAA0B;IAC1B,IAAI,QAAQ,OAAO,CAAC,QAAQ,EAC3B,kBAAkB;IAClB,SAAS,IAAI,CAAC,mBAAmB,QAAQ,OAAO,CAAC,QAAQ,GAAG;SAE5D,gBAAgB;IAChB,SAAS,IAAI,CAAC;IAEf,SAAS,GAAG;AACb;AAEA,0BAAI,MAAM,CAAC,4BAAM,CAAC,QAAS;IACvB,IAAG,CAAC,OACA,QAAQ,GAAG,CAAC,kEAAiE;SAE7E,QAAQ,GAAG,CAAC,sCAAsC;AACtD","sources":["app.js"],"sourcesContent":["const express = require('express');\r\nconst path = require('path');\r\nconst session = require('express-session');\r\nconst mysql = require('mysql');\r\n\r\nconst PORT = 3000;\r\n  \r\n\r\nconst connection = mysql.createConnection({\r\n\thost     : 'localhost',\r\n\tuser     : 'root',\r\n\tpassword : '',\r\n\tdatabase : 'nodelogin'\r\n});\r\n\r\nconst app = express();\r\n\r\napp.use(session({\r\n\tsecret: 'secret',\r\n\tresave: true,\r\n\tsaveUninitialized: true\r\n}));\r\napp.use(express.json());\r\napp.use(express.urlencoded({ extended: true }));\r\napp.use(express.static(path.join(__dirname, 'static')));\r\n\r\napp.use(express.static('frontend'))\r\napp.get('/login', (req, res)=>{\r\n    res.status(200);\r\n    res.sendFile(path.join(__dirname, '/frontend/login.html'));\r\n\r\n});\r\n\r\napp.get('/', (req, res)=>{\r\n    res.status(200);\r\n    res.sendFile(path.join(__dirname, '/frontend/index.html'));\r\n\r\n});\r\n\r\napp.post('/auth', function(request, response) {\r\n\t// Capture the input fields\r\n\tlet username = request.body.username;\r\n\tlet password = request.body.password;\r\n\t// Ensure the input fields exists and are not empty\r\n\tif (username && password) {\r\n\t\t// Execute SQL query that'll select the account from the database based on the specified username and password\r\n\t\tconnection.query('SELECT * FROM accounts WHERE username = ? AND password = ?', [username, password], function(error, results, fields) {\r\n\t\t\t// If there is an issue with the query, output the error\r\n\t\t\tif (error) throw error;\r\n\t\t\t// If the account exists\r\n\t\t\tif (results.length > 0) {\r\n\t\t\t\t// Authenticate the user\r\n\t\t\t\trequest.session.loggedin = true;\r\n\t\t\t\trequest.session.username = username;\r\n\t\t\t\t// Redirect to home page\r\n\t\t\t\tresponse.redirect('/home');\r\n\t\t\t} else {\r\n\t\t\t\tresponse.send('Incorrect Username and/or Password!');\r\n\t\t\t}\t\t\t\r\n\t\t\tresponse.end();\r\n\t\t});\r\n\t} else {\r\n\t\tresponse.send('Please enter Username and Password!');\r\n\t\tresponse.end();\r\n\t}\r\n});\r\n\r\n// http://localhost:3000/home\r\napp.get('/home', function(request, response) {\r\n\t// If the user is loggedin\r\n\tif (request.session.loggedin) {\r\n\t\t// Output username\r\n\t\tresponse.send('Welcome back, ' + request.session.username + '!');\r\n\t} else {\r\n\t\t// Not logged in\r\n\t\tresponse.send('Please login to view this page!');\r\n\t}\r\n\tresponse.end();\r\n});\r\n  \r\napp.listen(PORT, (error) =>{\r\n    if(!error)\r\n        console.log(\"Server is Successfully Running, and App is listening on port \"+ PORT)\r\n    else \r\n        console.log(\"Error occurred, server can't start\", error);\r\n    }\r\n);"],"names":[],"version":3,"file":"index.js.map","sourceRoot":"/"}